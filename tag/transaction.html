<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>junehan.dev.log - transaction</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">junehan.dev.log</a></h1>
                <nav><ul>
                    <li><a href="/category/algorithm.html">algorithm</a></li>
                    <li><a href="/category/database.html">database</a></li>
                    <li><a href="/category/datastructure.html">datastructure</a></li>
                    <li><a href="/category/math.html">math</a></li>
                    <li><a href="/category/writting.html">writting</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/posts/database/2023/03/28/intro-to-transcation-mechanism">Query Primer 12. Transactions</a></h1>
<footer class="post-info">
        <abbr class="published" title="2023-03-28T22:04:00+09:00">
                Published: Tue 28 March 2023
        </abbr>
		<br />
        <abbr class="modified" title="2023-03-29T20:32:00+09:00">
                Updated: Wed 29 March 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/junehan.html">junehan</a>
        </address>
<p>In <a href="/category/database.html">database</a>.</p>
<p>tags: <a href="/tag/database.html">database</a> <a href="/tag/transaction.html">transaction</a> </p>
</footer><!-- /.post-info --><dl class="docutils">
<dt><em>transactions</em></dt>
<dd>SQL 구문들을 그룹화하여, 그룹 전체를 성공, 실패하도록 관리하는 매커니즘.</dd>
</dl>
<div class="section" id="subject-database-transaction">
<h2>SUBJECT: Database의 transaction 매커니즘에 대한 이해</h2>
<blockquote>
<ul>
<li><p class="first">References</p>
<blockquote>
<ul>
<li><p class="first">web</p>
</li>
<li><p class="first">text book</p>
<blockquote>
<ul class="simple">
<li>Learning sql 3rd edition/Alan Beaulieu/9781492057611</li>
<li>SQL level up/Mic/9788968482519</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</div>
<div class="section" id="multiuser-databases">
<h2>Multiuser Databases</h2>
<div class="line-block">
<div class="line">DBMS는 한명의 유저가 데이터를 수정하고, 데이터를 읽는 것을 허용하지만</div>
<div class="line">다수의 유저가 DB에 동시적으로 접근하고 수정이 일어난다.</div>
<div class="line">예를 들어 이번주의 영화 대여정보를 집계하려고 하는데,</div>
</div>
<blockquote>
<ul class="simple">
<li>고객이 영화를 새로 대여하는 상황</li>
<li>고객이 대여한 것을 반납하는 상황</li>
</ul>
</blockquote>
<div class="line-block">
<div class="line">이렇게 추가와 수정이 같이 일어난다면,</div>
<div class="line">내가 원하는 집계결과는 어떻게 나와할까?</div>
</div>
<p>정답은, 어떻게 DBMS가 <em>locking</em>을 다루는 지에 달려있다.</p>
</div>
<div class="section" id="locking">
<h2>Locking</h2>
<div class="line-block">
<div class="line">Lock은 동시 접근을 제어하기 위한 메커니즘이다.</div>
<div class="line">이미 수정이 일어나고 있거나, 접근 중인 데이터에 수정을 하려면 lock이 해제되는 것을 기다려야 한다.</div>
<div class="line">대부분의 DBMS는 아래 두 가지 <em>locking strateies</em>중 하나를 사용한다.</div>
</div>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2"><em>read lock, write lock</em>:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body"><div class="first line-block">
<div class="line">Database Writer는 <em>write lock</em>을 DBMS로부터 습득해야 데이터를 수정할 수 있고,</div>
<div class="line">Database Reader는 <em>read lock</em>을 DBMS로부터 습득해야 데이터를 읽을 수 있다.</div>
<div class="line"><em>Read lock</em>은 동시에 여러 유저에게 전달될 수 있지만,</div>
<div class="line"><em>Write lock</em>은 각 테이블에 하나만 발행될 수 있고, 발행된 동안 <em>read requests</em>는 막힌상태로 대기한다.</div>
</div>
<blockquote>
<ul>
<li><p class="first">pro</p>
<blockquote>
<p>순차적으로 잘 반영된 데이터를 보장할 수 있다.</p>
</blockquote>
</li>
<li><p class="first">con</p>
<blockquote>
<p>많은 요청을 처리할 때, write 요청의 처리 속도에 따라 전체적인 속도가 좌우된다.</p>
</blockquote>
</li>
</ul>
</blockquote>
</td>
</tr>
<tr class="field"><th class="field-name"><em>versioning</em>:</th><td class="field-body"><div class="first line-block">
<div class="line">Database Writers는 <em>write lock</em>을 요청하고 습득해야 데이터를 수정할 수 있지만,</div>
<div class="line">Database Reader는 어떠한 타입의 lock도 필요로 하지 않는다.</div>
<div class="line">대신, 서버는 Reader의 쿼리가 시작된 시점에서 종료되는 시점사이에 일어나는 어떠한 수정도 반영되지 않은,</div>
<div class="line">균일한 view의 데이터를 보장해야한다.</div>
<div class="line">이 접근법은 <em>versioning</em>이라고 알려져 있다.</div>
</div>
<blockquote class="last">
<ul>
<li><p class="first">pro</p>
<blockquote>
<p>많은 요청을 허용할 수 있다.</p>
</blockquote>
</li>
<li><p class="first">con</p>
<blockquote>
<p>특정 read 요청이 길어질 경우 그 사이 많은 수정사항이 종료되었다면 version과 version사이에 차이가 많이 벌어진다.</p>
</blockquote>
</li>
</ul>
</blockquote>
</td>
</tr>
</tbody>
</table>
</blockquote>
<div class="line-block">
<div class="line">위 전략의 사용사례로는 아래와 같다.</div>
</div>
<blockquote>
<ul class="simple">
<li>Microsoft SQL Server: 첫 번째, <em>read lock, write lock</em> strategy</li>
<li>Oracle Server: 두 번째, <em>versioning</em> strategy</li>
<li>MYSQL SERVER: 선택가능, strategy depend on <em>storage engine</em></li>
</ul>
</blockquote>
<div class="section" id="lock-granularities">
<h3>Lock Granularities</h3>
</div>
</div>
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://github.com/junehan-dev">github</a></li>
                            <li><a href="https://junehan-dev.github.io/doc">study blog</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://github.com/junehan-dev/">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>